<%- include('partials/header', { title: 'Encore Register', activePage: 'login' }) %>

    <div class="container py-5 d-flex justify-content-center">
      <!-- Registration card -->
      <div class="card card-elevated p-4 p-md-5 bg-white" style="max-width: 500px; width: 100%">
      <div class="d-flex justify-content-between align-items-center mb-3">
        <h2 class="mb-0 text-success fw-bold">Join Encore</h2>
        <a class="text-decoration-none" href="/login">Login</a>
      </div>
      <p class="text-muted mb-4">Create an account to build your performer profile.</p>

      <!-- Validation errors, if any -->
      <% if (error_message && error_message !== "") { %>
      <div class="alert alert-danger py-2"><%= error_message %></div>
      <% } %>

      <!-- Registration form -->
      <form action="/register" method="POST" enctype="multipart/form-data">
        <!-- Basic account info -->
        <div class="mb-3">
          <label class="form-label" for="name">Name</label>
          <input
            class="form-control"
            type="text"
            id="name"
            name="name"
            placeholder="Stage or full name"
            required
          />
        </div>
        <div class="mb-3">
          <label class="form-label" for="email">Email</label>
          <input
            class="form-control"
            type="email"
            id="email"
            name="email"
            placeholder="you@example.com"
            required
          />
        </div>
        <div class="mb-3">
          <label class="form-label" for="password">Password</label>
          <input
            class="form-control"
            type="password"
            id="password"
            name="password"
            minlength="6"
            required
          />
        </div>

        <div class="mb-3">
          <label class="form-label d-block">Show me in the performer directory?</label>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="is_performer"
              id="registerPerformerYes"
              value="Y"
              checked
            />
            <label class="form-check-label" for="registerPerformerYes">
              Yes, I am a performer
            </label>
          </div>
          <div class="form-check form-check-inline">
            <input
              class="form-check-input"
              type="radio"
              name="is_performer"
              id="registerPerformerNo"
              value="N"
            />
            <label class="form-check-label" for="registerPerformerNo">
              No, Iâ€™m just here to find talent
            </label>
          </div>
        </div>

        <div class="mb-3">
          <label class="form-label" for="profileImage">Profile image (optional)</label>
          <input
            class="form-control"
            type="file"
            id="profileImage"
            name="profileImage"
            accept="image/*"
          />
          <div class="form-text">Max 5MB. JPG, PNG, or GIF.</div>
        </div>

        <!-- Optional default avatar gallery -->
        <div class="mb-4">
          <button
            type="button"
            class="btn btn-outline-secondary btn-sm mb-2"
            id="toggleAvatarGalleryRegister"
          >
            Choose from default avatars
          </button>
          <div class="row g-2" id="avatarGalleryRegister" style="display: none;">
            <% const defaultFiles = [
              "Untitled design (48).png",
              "Untitled design (49).png",
              "Untitled design (50).png",
              "Untitled design (51).png",
              "Untitled design (52).png",
              "Untitled design (53).png",
              "Untitled design (54).png",
              "Untitled design (55).png",
              "Untitled design (56).png",
              "Untitled design (57).png",
              "Untitled design (58).png",
            ]; %>
            <% defaultFiles.forEach(function(file, idx) { %>
            <div class="col-4">
              <div class="form-check">
                <input
                  class="form-check-input"
                  type="radio"
                  name="default_avatar"
                  id="defaultAvatarRegister<%= idx %>"
                  value="<%= file %>"
                />
                <label class="form-check-label d-block" for="defaultAvatarRegister<%= idx %>">
                  <img
                    src="/uploads/default-avatars/<%= file %>"
                    alt="Avatar option"
                    class="img-fluid rounded"
                  />
                </label>
              </div>
            </div>
            <% }); %>
          </div>
        </div>
        <div class="mb-3">
          <label class="form-label" for="confirmPassword">Confirm password</label>
          <input
            class="form-control"
            type="password"
            id="confirmPassword"
            name="confirmPassword"
            minlength="6"
            required
          />
        </div>
        <div class="d-grid">
          <button class="btn btn-success" type="submit">Create account</button>
        </div>
      </form>
      </div>
    </div>

    <!-- Small helper script to toggle avatar gallery visibility -->
    <script>
      (function () {
        const toggleGalleryBtn = document.getElementById("toggleAvatarGalleryRegister");
        const avatarGallery = document.getElementById("avatarGalleryRegister");

        if (toggleGalleryBtn && avatarGallery) {
          toggleGalleryBtn.addEventListener("click", () => {
            const isHidden = avatarGallery.style.display === "none" || avatarGallery.style.display === "";
            avatarGallery.style.display = isHidden ? "block" : "none";
          });
        }
      })();
    </script>

<%- include('partials/footer') %>
